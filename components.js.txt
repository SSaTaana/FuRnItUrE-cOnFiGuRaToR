const { useState, useEffect } = React;
    const { createRoot } = ReactDOM;

    i18next.init({
      lng: 'ru',
      resources: {
        ru: {
          translation: {
            "welcome_title": "Добро пожаловать!",
            "welcome_text": "Откройте мир мебельной фурнитуры с нашим удобным конфигуратором.",
            "go_to_configurator": "Начать",
            "configurator_title": "Конфигуратор мебельной фурнитуры",
            "type_label": "Тип фурнитуры",
            "type_placeholder": "Выберите тип",
            "type_tooltip": "Выберите тип, например, петли или ручки.",
            "brand_label": "Бренд",
            "brand_placeholder": "Выберите бренд",
            "brand_tooltip": "Выберите бренд, например, GTV или BOYARD.",
            "specific_option_label": "Опции",
            "specific_option_placeholder": "Выберите опцию",
            "specific_option_tooltip": "Уточните характеристики, например, доводчик.",
            "price_range_from": "Цена от (руб.)",
            "price_range_to": "Цена до (руб.)",
            "find_options": "Найти",
            "results_title": "Найденные варианты:",
            "tab_results": "Результаты",
            "tab_saved": "Сохранённые",
            "tab_compare": "Сравнение",
            "tab_history": "История поиска",
            "tab_calculator": "Калькулятор",
            "save": "Сохранить",
            "compare": "Сравнить",
            "remove_compare": "Убрать из сравнения",
            "saved_results_title": "Сохранённые варианты:",
            "compare_title": "Сравнение товаров:",
            "history_title": "История поиска:",
            "export_selected_pdf": "Экспорт в PDF",
            "export_all_pdf": "Экспорт в PDF",
            "no_match": "Совпадений нет. Показываем похожие.",
            "price_disclaimer": "*Цена может варьироваться",
            "about_title": "О нас",
            "about_text": "Мы представляем свой конфигуратор, который может помочь вам с первичными видами и типами определенной мебельной фурнитуры, поможем узнать среднюю цену, анализируя разные сайты поставщиков и продавцов. Наша цель — упростить ваш выбор, предоставляя актуальную информацию и удобный интерфейс для поиска идеального решения.",
            "nav_home": "Главная",
            "nav_configurator": "Конфигуратор",
            "nav_about": "О нас",
            "nav_warehouse": "Виртуальный тур",
            "nav_promotions": "Акции",
            "nav_contacts": "Контакты",
            "lang_ru": "Русский",
            "lang_en": "English",
            "theme_dark": "Темная тема",
            "theme_light": "Светлая тема",
            "name_label": "Наименование",
            "type": "Петля",
            "subtype_label": "Подтип",
            "option": "Опция",
            "brand": "Бренд",
            "price": "Цена",
            "description": "Описание",
            "promotions_title": "Акции и скидки",
            "promotion_gtv_discount": "Скидка 20% на GTV до 2025-06-15",
            "promotion_free_delivery": "Бесплатная доставка от 7000 руб. до 2025-06-20",
            "warehouse_title": "Виртуальный тур по складу",
            "warehouse_text": "Погрузитесь в мир нашей фурнитуры!",
            "contacts_title": "Свяжитесь с нами",
            "contacts_text": "Оставьте заявку для консультации.",
            "sort_asc": "По возрастанию",
            "sort_desc": "По убыванию",
            "sort_label": "Сортировать",
            "search_label": "Поиск по названию",
            "clear_filters": "Очистить фильтры",
            "Hinge": "Петля",
            "Corner": "Угловая",
            "Overlay": "Накладная",
            "Inset": "Врезная",
            "Push-to-open": "Push-to-open",
            "Reinforced": "Усиленная",
            "Guide": "Направляющая",
            "Ball-bearing": "Шариковая",
            "Roller": "Роликовая",
            "Handle": "Ручка",
            "Round": "Круглая",
            "Long": "Длинная",
            "Rail": "Рейлинг",
            "Mounting": "Крепление",
            "Hidden": "Скрытое",
            "Adjustable": "Регулируемое",
            "Standard": "Стандартная",
            "With soft-close": "С доводчиком",
            "Light": "Лёгкая",
            "Basic": "Базовое",
            "calculator_title": "Калькулятор стоимости",
            "quantity_label": "Количество (шт.):",
            "discount_label": "Скидка (%):",
            "calculate_label": "Рассчитать",
            "total_label": "Общая стоимость (руб.):",
            "database_title": "Список всей базы данных",
            "database_item": "Название: {name}, Цена: {price} руб."
          }
        },
        en: {
          translation: {
            "welcome_title": "Welcome!",
            "welcome_text": "Discover the world of furniture fittings with our configurator.",
            "go_to_configurator": "Start",
            "configurator_title": "Furniture Fittings Configurator",
            "type_label": "Fitting Type",
            "type_placeholder": "Select type",
            "type_tooltip": "Select a type, e.g., hinges or handles.",
            "brand_label": "Brand",
            "brand_placeholder": "Select brand",
            "brand_tooltip": "Select a brand, e.g., GTV or BOYARD.",
            "specific_option_label": "Options",
            "specific_option_placeholder": "Select option",
            "specific_option_tooltip": "Specify features, e.g., soft-close.",
            "price_range_from": "Price from (RUB)",
            "price_range_to": "Price to (RUB)",
            "find_options": "Find",
            "results_title": "Found Options:",
            "tab_results": "Results",
            "tab_saved": "Saved",
            "tab_compare": "Compare",
            "tab_history": "Search History",
            "tab_calculator": "Calculator",
            "save": "Save",
            "compare": "Compare",
            "remove_compare": "Remove from Compare",
            "saved_results_title": "Saved Options:",
            "compare_title": "Compare Items:",
            "history_title": "Search History:",
            "export_selected_pdf": "Export to PDF",
            "export_all_pdf": "Export to PDF",
            "no_match": "No matches. Showing similar.",
            "price_disclaimer": "*Price may vary",
            "about_title": "About Us",
            "about_text": "We present our configurator, which can help you with primary types and categories of specific furniture fittings, helping you determine average prices by analyzing various supplier and seller websites. Our goal is to simplify your choice by providing up-to-date information and a user-friendly interface to find the perfect solution.",
            "nav_home": "Home",
            "nav_configurator": "Configurator",
            "nav_about": "About Us",
            "nav_warehouse": "Virtual Tour",
            "nav_promotions": "Promotions",
            "nav_contacts": "Contacts",
            "lang_ru": "Русский",
            "lang_en": "English",
            "theme_dark": "Dark Theme",
            "theme_light": "Light Theme",
            "name_label": "Name",
            "type": "Hinge",
            "subtype_label": "Subtype",
            "option": "Option",
            "brand": "Brand",
            "price": "Price",
            "description": "Description",
            "promotions_title": "Promotions and Discounts",
            "promotion_gtv_discount": "20% off GTV until 2025-06-15",
            "promotion_free_delivery": "Free delivery over 7000 RUB until 2025-06-20",
            "warehouse_title": "Virtual Warehouse Tour",
            "warehouse_text": "Dive into our fittings world!",
            "contacts_title": "Contact Us",
            "contacts_text": "Leave a request for consultation.",
            "sort_asc": "Ascending",
            "sort_desc": "Descending",
            "sort_label": "Sort",
            "search_label": "Search by name",
            "clear_filters": "Clear Filters",
            "calculator_title": "Cost Calculator",
            "quantity_label": "Quantity (pcs.):",
            "discount_label": "Discount (%):",
            "calculate_label": "Calculate",
            "total_label": "Total Cost (RUB):",
            "database_title": "Full Database List",
            "database_item": "Name: {name}, Price: {price} RUB"
          }
        }
      }
    });

    const Navbar = ({ setCurrentPage, onLanguageChange, toggleTheme, currentTheme }) => {
      const changeLanguage = (lng) => {
        i18next.changeLanguage(lng);
        onLanguageChange(lng);
        document.querySelectorAll('[data-i18n]').forEach(elem => {
          elem.textContent = i18next.t(elem.getAttribute('data-i18n'));
        });
      };

      return (
        React.createElement('nav', { className: 'navbar flex gap-4' },
          React.createElement('a', {
            href: '#',
            onClick: () => setCurrentPage('welcome'),
            className: 'text-white hover:text-green-400 transition duration-300 light-theme:text-black light-theme:hover:text-purple-600',
            'data-i18n': 'nav_home'
          }, i18next.t('nav_home')),
          React.createElement('a', {
            href: '#',
            onClick: () => setCurrentPage('configurator'),
            className: 'text-white hover:text-green-400 transition duration-300 light-theme:text-black light-theme:hover:text-purple-600',
            'data-i18n': 'nav_configurator'
          }, i18next.t('nav_configurator')),
          React.createElement('a', {
            href: '#',
            onClick: () => setCurrentPage('about'),
            className: 'text-white hover:text-green-400 transition duration-300 light-theme:text-black light-theme:hover:text-purple-600',
            'data-i18n': 'nav_about'
          }, i18next.t('nav_about')),
          React.createElement('a', {
            href: '#',
            onClick: () => setCurrentPage('warehouse'),
            className: 'text-white hover:text-green-400 transition duration-300 light-theme:text-black light-theme:hover:text-purple-600',
            'data-i18n': 'nav_warehouse'
          }, i18next.t('nav_warehouse')),
          React.createElement('a', {
            href: '#',
            onClick: () => setCurrentPage('promotions'),
            className: 'text-white hover:text-green-400 transition duration-300 light-theme:text-black light-theme:hover:text-purple-600',
            'data-i18n': 'nav_promotions'
          }, i18next.t('nav_promotions')),
          React.createElement('a', {
            href: '#',
            onClick: () => setCurrentPage('contacts'),
            className: 'text-white hover:text-green-400 transition duration-300 light-theme:text-black light-theme:hover:text-purple-600',
            'data-i18n': 'nav_contacts'
          }, i18next.t('nav_contacts')),
          React.createElement('div', { className: 'flex gap-2' },
            React.createElement('button', {
              onClick: () => changeLanguage('ru'),
              className: 'text-white hover:text-green-400 transition duration-300 light-theme:text-black light-theme:hover:text-purple-600',
              'data-i18n': 'lang_ru'
            }, i18next.t('lang_ru')),
            React.createElement('button', {
              onClick: () => changeLanguage('en'),
              className: 'text-white hover:text-green-400 transition duration-300 light-theme:text-black light-theme:hover:text-purple-600',
              'data-i18n': 'lang_en'
            }, i18next.t('lang_en')),
            React.createElement('button', {
              onClick: toggleTheme,
              className: 'text-white hover:text-green-400 transition duration-300 light-theme:text-black light-theme:hover:text-purple-600',
              'data-i18n': currentTheme === 'dark' ? 'theme_light' : 'theme_dark'
            }, i18next.t(currentTheme === 'dark' ? 'theme_light' : 'theme_dark'))
          )
        )
      );
    };

    const WelcomePage = ({ onNavigate }) => {
      return (
        React.createElement('div', { className: 'welcome-container' },
          React.createElement('h1', {
            className: 'text-5xl font-bold mb-8 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
            'data-i18n': 'welcome_title'
          }, i18next.t('welcome_title')),
          React.createElement('p', { className: 'text-gray-300 mb-10 light-theme:text-gray-600', 'data-i18n': 'welcome_text' }, i18next.t('welcome_text')),
          React.createElement('button', {
            onClick: onNavigate,
            className: 'gradient-button'
          },
            React.createElement('span', { 'data-i18n': 'go_to_configurator' }, i18next.t('go_to_configurator'))
          )
        )
      );
    };

    const Modal = ({ imageSrc, onClose }) => {
      return (
        React.createElement('div', { className: 'modal' },
          React.createElement('span', { className: 'modal-close', onClick: onClose }, '×'),
          React.createElement('img', { src: imageSrc, alt: 'Preview' })
        )
      );
    };

    const ConfiguratorPage = ({ language }) => {
      const [type, setType] = useState('');
      const [specificOption, setSpecificOption] = useState('');
      const [brand, setBrand] = useState('');
      const [priceRange, setPriceRange] = useState({ min: '', max: '' });
      const [results, setResults] = useState([]);
      const [savedResults, setSavedResults] = useState([]);
      const [compareItems, setCompareItems] = useState([]);
      const [searchQuery, setSearchQuery] = useState('');
      const [searchHistory, setSearchHistory] = useState([]);
      const [activeTab, setActiveTab] = useState('results');
      const [error, setError] = useState('');
      const [sortOrder, setSortOrder] = useState('none');
      const [currentPage, setCurrentPage] = useState(1);
      const [isLoading, setIsLoading] = useState(false);
      const [modalImage, setModalImage] = useState(null);

      const itemsPerPage = 6;

      const fittingsDatabase = [
        { id: 1, name: "Петля угловая стандартная", type: "Петля", subtype: "Угловая", mechanism: "Без доводчика", specificOption: "Стандартная", brand: "GTV", price: 500, description: "Надёжная угловая петля для шкафов.", image: "https://avatars.mds.yandex.net/i?id=6c6f936f9f225749da710eacb5cccc32426fde80-8132087-images-thumbs&n=13", inStock: true },
        { id: 2, name: "Петля накладная с доводчиком", type: "Петля", subtype: "Накладная", mechanism: "С доводчиком", specificOption: "С доводчиком", brand: "BOYARD", price: 800, description: "Накладная петля с плавным закрыванием.", image: "https://www.boyard.biz/thumbs/original/products/h301a020930/36e376c9887d25fa4c777f18305719e2.jpg", inStock: false },
        { id: 3, name: "Петля врезная push-to-open", type: "Петля", subtype: "Врезная", mechanism: "Push-to-open", specificOption: "Push-to-open", brand: "DECOLINE", price: 1200, description: "Врезная петля с push-механизмом.", image: "https://gratis72.ru/upload/iblock/493/tehvfjk7lpyrz06nq7qb77sv6lj4drk1/08558114_fe74_11ec_b964_00155d936a00_5a75ba8f_fe7c_11ec_b964_00155d936a00.png", inStock: true },
        { id: 4, name: "Направляющая шариковая стандартная", type: "Направляющая", subtype: "Шариковая", mechanism: "Без доводчика", specificOption: "Стандартная", brand: "MF", price: 1500, description: "Шариковая направляющая для ящиков.", image: "https://avatars.mds.yandex.net/i?id=f5e609961ac0460c78fd86fec8d1fcbfe10626fd-5217037-images-thumbs&n=13", inStock: true },
        { id: 5, name: "Направляющая роликовая с доводчиком", type: "Направляющая", subtype: "Роликовая", mechanism: "С доводчиком", specificOption: "С доводчиком", brand: "GTV", price: 1800, description: "Роликовая направляющая с плавным ходом.", image: "https://cdn1.ozone.ru/s3/multimedia-b/6042782627.jpg", inStock: false },
        { id: 6, name: "Направляющая скрытого монтажа push-to-open", type: "Направляющая", subtype: "Скрытого монтажа", mechanism: "Push-to-open", specificOption: "Push-to-open", brand: "BOYARD", price: 2000, description: "Скрытая направляющая для ящиков.", image: "https://fantorg-irk.ru/upload/iblock/025/0252e19ba37270bfe55e603074ce18b0.jpg", inStock: true },
        { id: 7, name: "Ручка круглая классическая", type: "Ручка", subtype: "Круглая", mechanism: "Без доводчика", specificOption: "Классическая", brand: "DECOLINE", price: 300, description: "Классическая круглая ручка.", image: "https://avatars.mds.yandex.net/i?id=0162c28c527b7eb6053a30b1b042ed7b_l-5233220-images-thumbs&n=13", inStock: true },
        { id: 8, name: "Ручка длинная современная", type: "Ручка", subtype: "Длинная", mechanism: "Без доводчика", specificOption: "Рейлинг", brand: "MF", price: 400, description: "Современная длинная ручка-рейлинг.", image: "https://avatars.mds.yandex.net/i?id=2b0da45dcaa2a51019f95bb92fa43d4d_l-5859311-images-thumbs&n=13", inStock: false },
        { id: 9, name: "Ручка квадратная push-to-open", type: "Ручка", subtype: "Квадратная", mechanism: "Push-to-open", specificOption: "Скоба", brand: "GTV", price: 600, description: "Квадратная ручка-скоба с push-механизмом.", image: "https://lavrmf.ru/upload/iblock/dc4/xu9l839o92jykgv8odqy33wq4ugeucfn/KHettikh-mekhanizm-Push-to-open-magnet-d-petel-pod-prikruchivanie-dlinnyy-khod-belyy-25sht-9089591-3.jpg", inStock: true },
        { id: 10, name: "Крепление угловое базовое", type: "Крепление", subtype: "Угловое", mechanism: "Без доводчика", specificOption: "Базовое", brand: "BOYARD", price: 400, description: "Базовое угловое крепление.", image: "https://avatars.mds.yandex.net/i?id=e7033f6d7e9ef1a87d8b637230e2c403_l-3986726-images-thumbs&n=13", inStock: true },
      ];

      const specificOptions = {
        "Петля": ["Стандартная", "С доводчиком", "Push-to-open", "Усиленная", "Скрытая", "Декоративная", "Компактная", "Двойная", "Мини", "Премиум"],
        "Направляющая": ["Стандартная", "С доводчиком", "Push-to-open", "Лёгкая", "Усиленная", "Декоративная", "Мягкая", "Двойная", "Компактная"],
        "Ручка": ["Классическая", "Рейлинг", "Скоба", "Винтажная", "Современная", "Дизайнерская", "Минималистичная", "Эргономичная"],
        "Крепление": ["Базовое", "Регулируемое", "Улучшенное", "Компактное", "Стандартное", "Усиленное", "Универсальное", "Потолочное"]
      };

      const findBestOptions = async () => {
        setIsLoading(true);
        if (!fittingsDatabase || fittingsDatabase.length === 0) {
          setError(i18next.t('no_match'));
          setResults([]);
          setIsLoading(false);
          return;
        }

        const filteredFittings = fittingsDatabase.filter(fitting => {
          const typeMatch = !type || fitting.type === type;
          const specificOptionMatch = !specificOption || fitting.specificOption === specificOption;
          const brandMatch = !brand || fitting.brand === brand;
          const priceMinMatch = !priceRange.min || fitting.price >= Number(priceRange.min);
          const priceMaxMatch = !priceRange.max || fitting.price <= Number(priceRange.max);
          const searchMatch = !searchQuery || fitting.name.toLowerCase().includes(searchQuery.toLowerCase()) || fitting.description.toLowerCase().includes(searchQuery.toLowerCase());

          return typeMatch && specificOptionMatch && brandMatch && priceMinMatch && priceMaxMatch && searchMatch;
        });

        let finalFittings = filteredFittings;
        if (filteredFittings.length === 0) {
          setError(i18next.t('no_match'));
          finalFittings = type ? fittingsDatabase.filter(f => f.type === type) : fittingsDatabase.slice(0, 1);
        } else {
          setError('');
        }

        setResults(finalFittings);
        if (searchQuery) {
          setSearchHistory(prev => [...new Set([searchQuery, ...prev])].slice(0, 10));
        }
        setIsLoading(false);
      };

      const saveToPDF = (resultsToExport) => {
        try {
          const docDefinition = {
            content: [
              { text: i18next.t('export_all_pdf'), style: 'header' },
              ...resultsToExport.map(fitting => ({
                text: [
                  `${i18next.t('name_label')}: ${fitting.name}\n`,
                  `${i18next.t('type')}: ${i18next.t(fitting.type)}\n`,
                  `${i18next.t('subtype_label')}: ${i18next.t(fitting.subtype)}\n`,
                  `${i18next.t('option')}: ${i18next.t(fitting.specificOption)}\n`,
                  `${i18next.t('brand')}: ${i18next.t(fitting.brand)}\n`,
                  `${i18next.t('price')}: ${fitting.price} руб.\n`,
                  `${i18next.t('description')}: ${fitting.description}\n\n`
                ]
              }))
            ],
            styles: {
              header: { fontSize: 18, bold: true, margin: [0, 0, 0, 10], color: '#000000' }
            }
          };
          pdfMake.createPdf(docDefinition).download('fittings_results.pdf');
        } catch (err) {
          setError('Ошибка при экспорте в PDF');
        }
      };

      const saveResult = (fitting) => {
        if (!savedResults.some(item => item.id === fitting.id)) {
          setSavedResults([...savedResults, fitting]);
        }
      };

      const addToCompare = (fitting) => {
        if (compareItems.length < 3 && !compareItems.some(item => item.id === fitting.id)) {
          setCompareItems([...compareItems, fitting]);
        }
      };

      const removeFromCompare = (fittingId) => {
        setCompareItems(compareItems.filter(item => item.id !== fittingId));
      };

      const sortResults = (order) => {
        setSortOrder(order);
        let sorted = [...results];
        if (order === 'asc') {
          sorted.sort((a, b) => a.price - b.price);
        } else if (order === 'desc') {
          sorted.sort((a, b) => b.price - a.price);
        }
        setResults(sorted);
      };

      const clearFilters = () => {
        setType('');
        setSpecificOption('');
        setBrand('');
        setPriceRange({ min: '', max: '' });
        setSearchQuery('');
        setCurrentPage(1);
      };

      const handlePriceRangeChange = (e) => {
        const { name, value } = e.target;
        const newValue = value === '' ? '' : Math.max(0, Number(value));
        setPriceRange(prev => ({ ...prev, [name]: newValue }));
      };

      useEffect(() => {
        findBestOptions();
      }, [language, type, specificOption, brand, priceRange, searchQuery]);

      const paginatedResults = results.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
      const totalPages = Math.ceil(results.length / itemsPerPage);

      return (
        React.createElement('div', { className: 'container-overlay configurator-container' },
          modalImage && React.createElement(Modal, {
            imageSrc: modalImage,
            onClose: () => setModalImage(null)
          }),
          React.createElement('h1', {
            className: 'text-5xl font-bold text-center mb-12 mt-8 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
            'data-i18n': 'configurator_title'
          }, i18next.t('configurator_title')),
          React.createElement('div', { className: 'flex flex-col md:flex-row justify-center items-center gap-6 mb-10' },
            React.createElement('div', { className: 'button-stack' },
              React.createElement('button', {
                onClick: () => setActiveTab('compare'),
                className: `tab-button ${activeTab === 'compare' ? 'active' : ''}`
              },
                React.createElement('span', { 'data-i18n': 'tab_compare' }, i18next.t('tab_compare'))
              ),
              React.createElement('button', {
                onClick: () => setActiveTab('saved'),
                className: `tab-button ${activeTab === 'saved' ? 'active' : ''}`
              },
                React.createElement('span', { 'data-i18n': 'tab_saved' }, i18next.t('tab_saved'))
              )
            ),
            React.createElement('div', { className: 'w-full md:w-1/4 tooltip' },
              React.createElement('label', { className: 'configurator-label block text-center', 'data-i18n': 'type_label' }, i18next.t('type_label')),
              React.createElement('span', { className: 'tooltip-text', 'data-i18n': 'type_tooltip' }, i18next.t('type_tooltip')),
              React.createElement('select', {
                value: type,
                onChange: (e) => { setType(e.target.value); setSpecificOption(''); },
                className: 'mt-2 block w-full rounded-lg border-gray-600 bg-gray-800 text-white shadow-md focus:ring-green-500 focus:border-green-500 p-3 transition duration-300 light-theme:bg-white light-theme:text-black light-theme:border-gray-300'
              },
                React.createElement('option', { value: '', 'data-i18n': 'type_placeholder' }, i18next.t('type_placeholder')),
                [...new Set(fittingsDatabase.map(f => f.type))].map(t =>
                  React.createElement('option', { key: t, value: t }, i18next.t(t))
                )
              )
            ),
            React.createElement('div', { className: 'w-full md:w-1/4 tooltip' },
              React.createElement('label', { className: 'configurator-label block text-center', 'data-i18n': 'brand_label' }, i18next.t('brand_label')),
              React.createElement('span', { className: 'tooltip-text', 'data-i18n': 'brand_tooltip' }, i18next.t('brand_tooltip')),
              React.createElement('select', {
                value: brand,
                onChange: (e) => setBrand(e.target.value),
                className: 'mt-2 block w-full rounded-lg border-gray-600 bg-gray-800 text-white shadow-md focus:ring-green-500 focus:border-green-500 p-3 transition duration-300 light-theme:bg-white light-theme:text-black light-theme:border-gray-300'
              },
                React.createElement('option', { value: '', 'data-i18n': 'brand_placeholder' }, i18next.t('brand_placeholder')),
                ["GTV", "BOYARD", "DECOLINE", "MF"].map(b =>
                  React.createElement('option', { key: b, value: b }, i18next.t(b))
                )
              )
            ),
            React.createElement('div', { className: 'button-stack' },
              React.createElement('button', {
                onClick: () => setActiveTab('results'),
                className: `tab-button ${activeTab === 'results' ? 'active' : ''}`
              },
                React.createElement('span', { 'data-i18n': 'tab_results' }, i18next.t('tab_results'))
              ),
              React.createElement('button', {
                onClick: () => setActiveTab('history'),
                className: `tab-button ${activeTab === 'history' ? 'active' : ''}`
              },
                React.createElement('span', { 'data-i18n': 'tab_history' }, i18next.t('tab_history'))
              )
            )
          ),
          type && React.createElement('div', { className: 'mb-8 text-center tooltip' },
            React.createElement('label', { className: 'configurator-label block text-center', 'data-i18n': 'specific_option_label' }, i18next.t('specific_option_label')),
            React.createElement('span', { className: 'tooltip-text', 'data-i18n': 'specific_option_tooltip' }, i18next.t('specific_option_tooltip')),
            React.createElement('select', {
              value: specificOption,
              onChange: (e) => setSpecificOption(e.target.value),
              className: 'mt-2 block w-1/2 mx-auto rounded-lg border-gray-600 bg-gray-800 text-white shadow-md focus:ring-green-500 focus:border-green-500 p-3 transition duration-300 light-theme:bg-white light-theme:text-black light-theme:border-gray-300'
            },
              React.createElement('option', { value: '', 'data-i18n': 'specific_option_placeholder' }, i18next.t('specific_option_placeholder')),
              specificOptions[type].map(option =>
                React.createElement('option', { key: option, value: option }, i18next.t(option))
              )
            )
          ),
          React.createElement('div', { className: 'price-inputs-container' },
            React.createElement('div', { className: 'price-labels' },
              React.createElement('label', { className: 'configurator-label', 'data-i18n': 'price_range_from' }, i18next.t('price_range_from')),
              React.createElement('label', { className: 'configurator-label', 'data-i18n': 'price_range_to' }, i18next.t('price_range_to'))
            ),
            React.createElement('div', { className: 'price-inputs' },
              React.createElement('div', null,
                React.createElement('input', {
                  type: 'number',
                  name: 'min',
                  value: priceRange.min,
                  onChange: handlePriceRangeChange,
                  className: 'mt-2 block w-full rounded-lg border-gray-600 bg-gray-800 text-white shadow-md focus:ring-green-500 focus:border-green-500 p-3 transition duration-300 text-center light-theme:bg-white light-theme:text-black light-theme:border-gray-300'
                })
              ),
              React.createElement('div', null,
                React.createElement('input', {
                  type: 'number',
                  name: 'max',
                  value: priceRange.max,
                  onChange: handlePriceRangeChange,
                  className: 'mt-2 block w-full rounded-lg border-gray-600 bg-gray-800 text-white shadow-md focus:ring-green-500 focus:border-green-500 p-3 transition duration-300 text-center light-theme:bg-white light-theme:text-black light-theme:border-gray-300'
                })
              )
            )
          ),
          React.createElement('div', { className: 'flex flex-col md:flex-row gap-4 justify-center mb-6' },
            React.createElement('div', { className: 'w-full md:w-1/4' },
              React.createElement('label', { className: 'configurator-label block text-center', 'data-i18n': 'search_label' }, i18next.t('search_label')),
              React.createElement('input', {
                type: 'text',
                value: searchQuery,
                onChange: (e) => setSearchQuery(e.target.value),
                className: 'mt-2 block w-full rounded-lg border-gray-600 bg-gray-800 text-white shadow-md focus:ring-green-500 focus:border-green-500 p-3 transition duration-300 light-theme:bg-white light-theme:text-black light-theme:border-gray-300'
              })
            )
          ),
          React.createElement('div', { className: 'text-center mb-6' },
            React.createElement('button', {
              onClick: findBestOptions,
              className: 'gradient-button mr-4'
            },
              React.createElement('span', { 'data-i18n': 'find_options' }, i18next.t('find_options'))
            ),
            React.createElement('button', {
              onClick: clearFilters,
              className: 'gradient-button'
            },
              React.createElement('span', { 'data-i18n': 'clear_filters' }, i18next.t('clear_filters'))
            )
          ),
          React.createElement('div', { className: 'tab-buttons' },
            React.createElement('button', {
              onClick: () => setActiveTab('results'),
              className: `tab-button ${activeTab === 'results' ? 'active' : ''}`
            },
              React.createElement('span', { 'data-i18n': 'tab_results' }, i18next.t('tab_results'))
            ),
            React.createElement('button', {
              onClick: () => setActiveTab('saved'),
              className: `tab-button ${activeTab === 'saved' ? 'active' : ''}`
            },
              React.createElement('span', { 'data-i18n': 'tab_saved' }, i18next.t('tab_saved'))
            ),
            React.createElement('button', {
              onClick: () => setActiveTab('compare'),
              className: `tab-button ${activeTab === 'compare' ? 'active' : ''}`
            },
              React.createElement('span', { 'data-i18n': 'tab_compare' }, i18next.t('tab_compare'))
            ),
            React.createElement('button', {
              onClick: () => setActiveTab('history'),
              className: `tab-button ${activeTab === 'history' ? 'active' : ''}`
            },
              React.createElement('span', { 'data-i18n': 'tab_history' }, i18next.t('tab_history'))
            ),
            React.createElement('button', {
              onClick: () => setActiveTab('calculator'),
              className: `tab-button ${activeTab === 'calculator' ? 'active' : ''}`
            },
              React.createElement('span', { 'data-i18n': 'tab_calculator' }, i18next.t('tab_calculator'))
            )
          ),
          React.createElement('div', { className: 'tab-content' },
            activeTab === 'results' && (
              React.createElement('div', null,
                error && React.createElement('p', { className: 'text-red-400 text-center mb-4' }, error),
                React.createElement('h2', {
                  className: 'text-3xl font-bold text-center mb-6 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
                  'data-i18n': 'results_title'
                }, i18next.t('results_title')),
                React.createElement('div', { className: 'sort-dropdown mb-4' },
                  React.createElement('button', {
                    onClick: () => sortResults('asc'),
                    className: 'gradient-button'
                  },
                    React.createElement('span', { 'data-i18n': 'sort_asc' }, i18next.t('sort_asc'))
                  ),
                  React.createElement('button', {
                    onClick: () => sortResults('desc'),
                    className: 'gradient-button ml-2'
                  },
                    React.createElement('span', { 'data-i18n': 'sort_desc' }, i18next.t('sort_desc'))
                  )
                ),
                isLoading ? React.createElement('div', { className: 'loader' }) : (
                  React.createElement('div', null,
                    React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6' },
                      paginatedResults.map(fitting => (
                        React.createElement('div', { key: fitting.id, className: 'p-4 bg-gray-800 rounded-lg shadow-lg light-theme:bg-gray-100 card-description' },
                          React.createElement('img', {
                            src: fitting.image,
                            alt: fitting.name,
                            className: 'fittings-image w-full mb-4 rounded',
                            onClick: () => setModalImage(fitting.image)
                          }),
                          React.createElement('h3', { className: 'text-xl font-semibold mb-2' }, fitting.name),
                          React.createElement('p', null, `${i18next.t('type')}: ${i18next.t(fitting.type)}`),
                          React.createElement('p', null, `${i18next.t('subtype_label')}: ${i18next.t(fitting.subtype)}`),
                          React.createElement('p', null, `${i18next.t('option')}: ${i18next.t(fitting.specificOption)}`),
                          React.createElement('p', null, `${i18next.t('brand')}: ${i18next.t(fitting.brand)}`),
                          React.createElement('p', null, `${i18next.t('description')}: ${fitting.description}`),
                          React.createElement('p', { className: 'price-text' }, `${i18next.t('price')}: ${fitting.price} руб.`),
                          React.createElement('p', null, i18next.t('price_disclaimer')),
                          React.createElement('button', {
                            onClick: () => saveResult(fitting),
                            className: 'gradient-button mt-2'
                          },
                            React.createElement('span', { 'data-i18n': 'save' }, i18next.t('save'))
                          ),
                          React.createElement('button', {
                            onClick: () => compareItems.some(item => item.id === fitting.id) ? removeFromCompare(fitting.id) : addToCompare(fitting),
                            className: 'gradient-button mt-2 ml-2'
                          },
                            React.createElement('span', { 'data-i18n': compareItems.some(item => item.id === fitting.id) ? 'remove_compare' : 'compare' }, i18next.t(compareItems.some(item => item.id === fitting.id) ? 'remove_compare' : 'compare'))
                          )
                        )
                      ))
                    ),
                    React.createElement('div', { className: 'flex justify-center mt-6 gap-4' },
                      React.createElement('button', {
                        onClick: () => setCurrentPage(prev => Math.max(prev - 1, 1)),
                        disabled: currentPage === 1,
                        className: 'gradient-button'
                      }, 'Предыдущая'),
                      React.createElement('span', { className: 'text-white' }, `Страница ${currentPage} из ${totalPages}`),
                      React.createElement('button', {
                        onClick: () => setCurrentPage(prev => Math.min(prev + 1, totalPages)),
                        disabled: currentPage === totalPages,
                        className: 'gradient-button'
                      }, 'Следующая')
                    )
                  )
                ),
                results.length > 0 && React.createElement('button', {
                  onClick: () => saveToPDF(results),
                  className: 'gradient-button mt-6'
                },
                  React.createElement('span', { 'data-i18n': 'export_selected_pdf' }, i18next.t('export_selected_pdf'))
                )
              )
            ),
            activeTab === 'saved' && (
              React.createElement('div', null,
                React.createElement('h2', {
                  className: 'text-3xl font-bold text-center mb-6 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
                  'data-i18n': 'saved_results_title'
                }, i18next.t('saved_results_title')),
                React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6' },
                  savedResults.map(fitting => (
                    React.createElement('div', { key: fitting.id, className: 'p-4 bg-gray-800 rounded-lg shadow-lg light-theme:bg-gray-100 card-description' },
                      React.createElement('img', {
                        src: fitting.image,
                        alt: fitting.name,
                        className: 'fittings-image w-full mb-4 rounded',
                        onClick: () => setModalImage(fitting.image)
                      }),
                      React.createElement('h3', { className: 'text-xl font-semibold mb-2' }, fitting.name),
                      React.createElement('p', null, `${i18next.t('type')}: ${i18next.t(fitting.type)}`),
                      React.createElement('p', null, `${i18next.t('subtype_label')}: ${i18next.t(fitting.subtype)}`),
                      React.createElement('p', null, `${i18next.t('option')}: ${i18next.t(fitting.specificOption)}`),
                      React.createElement('p', null, `${i18next.t('brand')}: ${i18next.t(fitting.brand)}`),
                      React.createElement('p', null, `${i18next.t('description')}: ${fitting.description}`),
                      React.createElement('p', { className: 'price-text' }, `${i18next.t('price')}: ${fitting.price} руб.`),
                      React.createElement('p', null, i18next.t('price_disclaimer')),
                      React.createElement('button', {
                        onClick: () => saveResult(fitting),
                        className: 'gradient-button mt-2'
                      },
                        React.createElement('span', { 'data-i18n': 'save' }, i18next.t('save'))
                      )
                    )
                  ))
                ),
                savedResults.length > 0 && React.createElement('button', {
                  onClick: () => saveToPDF(savedResults),
                  className: 'gradient-button mt-6'
                },
                  React.createElement('span', { 'data-i18n': 'export_all_pdf' }, i18next.t('export_all_pdf'))
                )
              )
            ),
            activeTab === 'compare' && (
              React.createElement('div', null,
                React.createElement('h2', {
                  className: 'text-3xl font-bold text-center mb-6 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
                  'data-i18n': 'compare_title'
                }, i18next.t('compare_title')),
                React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6' },
                  compareItems.map(fitting => (
                    React.createElement('div', { key: fitting.id, className: 'p-4 bg-gray-800 rounded-lg shadow-lg light-theme:bg-gray-100 card-description' },
                      React.createElement('img', {
                        src: fitting.image,
                        alt: fitting.name,
                        className: 'fittings-image w-full mb-4 rounded',
                        onClick: () => setModalImage(fitting.image)
                      }),
                      React.createElement('h3', { className: 'text-xl font-semibold mb-2' }, fitting.name),
                      React.createElement('p', null, `${i18next.t('type')}: ${i18next.t(fitting.type)}`),
                      React.createElement('p', null, `${i18next.t('subtype_label')}: ${i18next.t(fitting.subtype)}`),
                      React.createElement('p', null, `${i18next.t('option')}: ${i18next.t(fitting.specificOption)}`),
                      React.createElement('p', null, `${i18next.t('brand')}: ${i18next.t(fitting.brand)}`),
                      React.createElement('p', null, `${i18next.t('description')}: ${fitting.description}`),
                      React.createElement('p', { className: 'price-text' }, `${i18next.t('price')}: ${fitting.price} руб.`),
                      React.createElement('p', null, i18next.t('price_disclaimer')),
                      React.createElement('button', {
                        onClick: () => removeFromCompare(fitting.id),
                        className: 'gradient-button mt-2'
                      },
                        React.createElement('span', { 'data-i18n': 'remove_compare' }, i18next.t('remove_compare'))
                      )
                    )
                  ))
                )
              )
            ),
            activeTab === 'history' && (
              React.createElement('div', null,
                React.createElement('h2', {
                  className: 'text-3xl font-bold text-center mb-6 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
                  'data-i18n': 'history_title'
                }, i18next.t('history_title')),
                React.createElement('ul', { className: 'list-disc pl-5' },
                  searchHistory.map((query, index) => (
                    React.createElement('li', { key: index, className: 'text-white mb-2' }, query)
                  ))
                )
              )
            ),
            activeTab === 'calculator' && (
              React.createElement(CalculatorPage, { fittingsDatabase })
            )
          )
        )
      );
    };

    const CalculatorPage = ({ fittingsDatabase }) => {
      const [selectedItem, setSelectedItem] = useState(fittingsDatabase[0]?.id || '');
      const [quantity, setQuantity] = useState(1);
      const [discount, setDiscount] = useState(0);
      const [total, setTotal] = useState(0);

      const calculateTotal = () => {
        const item = fittingsDatabase.find(f => f.id === Number(selectedItem));
        if (item) {
          const basePrice = item.price * quantity;
          const discountAmount = basePrice * (discount / 100);
          setTotal(basePrice - discountAmount);
        }
      };

      useEffect(() => {
        calculateTotal();
      }, [selectedItem, quantity, discount]);

      return (
        React.createElement('div', { className: 'container-overlay calculator-container' },
          React.createElement('h2', {
            className: 'text-3xl font-bold text-center mb-6 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
            'data-i18n': 'calculator_title'
          }, i18next.t('calculator_title')),
          React.createElement('div', { className: 'mb-6' },
            React.createElement('label', { className: 'configurator-label block text-center mb-2', 'data-i18n': 'name_label' }, i18next.t('name_label')),
            React.createElement('select', {
              value: selectedItem,
              onChange: (e) => setSelectedItem(e.target.value),
              className: 'mt-2 block w-1/2 mx-auto rounded-lg border-gray-600 bg-gray-800 text-white shadow-md focus:ring-green-500 focus:border-green-500 p-3 transition duration-300 light-theme:bg-white light-theme:text-black light-theme:border-gray-300'
            },
              fittingsDatabase.map(f => (
                React.createElement('option', { key: f.id, value: f.id }, f.name)
              ))
            )
          ),
          React.createElement('div', { className: 'mb-6 text-center' },
            React.createElement('label', { className: 'configurator-label block mb-2', 'data-i18n': 'quantity_label' }, i18next.t('quantity_label')),
            React.createElement('input', {
              type: 'number',
              value: quantity,
              onChange: (e) => setQuantity(Math.max(1, Number(e.target.value))),
              className: 'mt-2 block w-1/4 mx-auto rounded-lg border-gray-600 bg-gray-800 text-white shadow-md focus:ring-green-500 focus:border-green-500 p-3 transition duration-300 text-center light-theme:bg-white light-theme:text-black light-theme:border-gray-300'
            })
          ),
          React.createElement('div', { className: 'mb-6 text-center' },
            React.createElement('label', { className: 'configurator-label block mb-2', 'data-i18n': 'discount_label' }, i18next.t('discount_label')),
            React.createElement('input', {
              type: 'number',
              value: discount,
              onChange: (e) => setDiscount(Math.max(0, Math.min(100, Number(e.target.value)))),
              className: 'mt-2 block w-1/4 mx-auto rounded-lg border-gray-600 bg-gray-800 text-white shadow-md focus:ring-green-500 focus:border-green-500 p-3 transition duration-300 text-center light-theme:bg-white light-theme:text-black light-theme:border-gray-300'
            })
          ),
          React.createElement('div', { className: 'text-center' },
            React.createElement('button', {
              onClick: calculateTotal,
              className: 'gradient-button'
            },
              React.createElement('span', { 'data-i18n': 'calculate_label' }, i18next.t('calculate_label'))
            ),
            React.createElement('div', { className: 'calculator-result mt-4' },
              React.createElement('span', { 'data-i18n': 'total_label' }, i18next.t('total_label')),
              ' ',
              total.toFixed(2)
            )
          ),
          React.createElement('h2', {
            className: 'text-3xl font-bold text-center mb-6 mt-10 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
            'data-i18n': 'database_title'
          }, i18next.t('database_title')),
          React.createElement('ul', { className: 'list-disc pl-5 text-center' },
            fittingsDatabase.map(f => (
              React.createElement('li', { key: f.id, className: 'text-white mb-2' },
                i18next.t('database_item', { name: f.name, price: f.price })
              )
            ))
          )
        )
      );
    };

    const AboutPage = () => (
      React.createElement('div', { className: 'about-container' },
        React.createElement('h2', {
          className: 'text-4xl font-bold mb-6',
          'data-i18n': 'about_title'
        }, i18next.t('about_title')),
        React.createElement('p', { className: 'text-lg', 'data-i18n': 'about_text' }, i18next.t('about_text'))
      )
    );

    const PromotionsPage = () => (
      React.createElement('div', { className: 'container-overlay' },
        React.createElement('h2', {
          className: 'text-4xl font-bold text-center mb-6 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
          'data-i18n': 'promotions_title'
        }, i18next.t('promotions_title')),
        React.createElement('div', { className: 'promotion-card' },
          React.createElement('p', { 'data-i18n': 'promotion_gtv_discount' }, i18next.t('promotion_gtv_discount'))
        ),
        React.createElement('div', { className: 'promotion-card' },
          React.createElement('p', { 'data-i18n': 'promotion_free_delivery' }, i18next.t('promotion_free_delivery'))
        )
      )
    );

    const WarehousePage = () => (
      React.createElement('div', { className: 'tour-container' },
        React.createElement('h2', {
          className: 'text-4xl font-bold mb-6 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
          'data-i18n': 'warehouse_title'
        }, i18next.t('warehouse_title')),
        React.createElement('p', { className: 'text-lg mb-6', 'data-i18n': 'warehouse_text' }, i18next.t('warehouse_text')),
        React.createElement('iframe', {
          src: "https://www.youtube.com/embed/dQw4w9WgXcQ",
          title: "Virtual Tour",
          frameBorder: "0",
          allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",
          allowFullScreen: true
        })
      )
    );

    const ContactsPage = () => (
      React.createElement('div', { className: 'container-overlay' },
        React.createElement('h2', {
          className: 'text-4xl font-bold text-center mb-6 bg-gradient-to-r from-green-400 to-purple-600 bg-clip-text text-transparent',
          'data-i18n': 'contacts_title'
        }, i18next.t('contacts_title')),
        React.createElement('p', { className: 'text-lg text-center mb-6', 'data-i18n': 'contacts_text' }, i18next.t('contacts_text'))
      )
    );

    const App = () => {
      const [currentPage, setCurrentPage] = useState('welcome');
      const [language, setLanguage] = useState('ru');
      const [theme, setTheme] = useState('dark');

      const toggleTheme = () => {
        setTheme(prev => (prev === 'dark' ? 'light' : 'dark'));
        document.body.className = `flex flex-col min-h-screen p-4 ${theme === 'dark' ? 'light-theme' : 'dark-theme'}`;
      };

      useEffect(() => {
        document.body.className = `flex flex-col min-h-screen p-4 ${theme}-theme`;
      }, [theme]);

      return (
        React.createElement('div', null,
          React.createElement(Navbar, {
            setCurrentPage,
            onLanguageChange: setLanguage,
            toggleTheme,
            currentTheme: theme
          }),
          currentPage === 'welcome' && React.createElement(WelcomePage, { onNavigate: () => setCurrentPage('configurator') }),
          currentPage === 'configurator' && React.createElement(ConfiguratorPage, { language }),
          currentPage === 'about' && React.createElement(AboutPage, null),
          currentPage === 'promotions' && React.createElement(PromotionsPage, null),
          currentPage === 'warehouse' && React.createElement(WarehousePage, null),
          currentPage === 'contacts' && React.createElement(ContactsPage, null)
        )
      );
    };